<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Solar System Calculator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    
    * {
      font-family: 'Inter', sans-serif;
    }
    
    .gradient-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .glass-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .input-focus {
      transition: all 0.3s ease;
    }
    
    .input-focus:focus {
      transform: translateY(-1px);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
    }
    
    .btn-gradient {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      transition: all 0.3s ease;
    }
    
    .btn-gradient:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
    }
    
    .btn-success {
      background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
    }
    
    .floating-element {
      animation: float 6s ease-in-out infinite;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    .results-card {
      background: linear-gradient(135deg, rgba(72, 187, 120, 0.1) 0%, rgba(56, 161, 105, 0.1) 100%);
      border: 1px solid rgba(72, 187, 120, 0.2);
    }
    
    .social-btn {
      transition: all 0.3s ease;
    }
    
    .social-btn:hover {
      transform: translateY(-3px) scale(1.05);
    }
  </style>
</head>
<body class="gradient-bg min-h-screen flex items-center justify-center p-4">
  
  <!-- Floating decorative elements -->
  <div class="fixed top-20 left-10 w-20 h-20 bg-white bg-opacity-10 rounded-full floating-element hidden lg:block"></div>
  <div class="fixed top-40 right-20 w-16 h-16 bg-white bg-opacity-10 rounded-full floating-element" style="animation-delay: -2s;"></div>
  <div class="fixed bottom-32 left-20 w-12 h-12 bg-white bg-opacity-10 rounded-full floating-element" style="animation-delay: -4s;"></div>

  <div class="glass-card shadow-2xl rounded-3xl p-8 w-full max-w-2xl relative overflow-hidden">
    
    <!-- Header -->
    <div class="text-center mb-8">
      <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-2xl mb-4 shadow-lg">
        <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M10 2L13.09 8.26L20 9.27L15 14.14L16.18 21.02L10 17.77L3.82 21.02L5 14.14L0 9.27L6.91 8.26L10 2Z" clip-rule="evenodd"/>
        </svg>
      </div>
      <h1 class="text-3xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent mb-2">
        Solar System Calculator
      </h1>
      <p class="text-gray-600 font-medium">Design your perfect solar energy solution</p>
    </div>

    <div class="grid md:grid-cols-2 gap-6">
      
      <!-- Left Column -->
      <div class="space-y-5">
        
        <!-- Country dropdown -->
        <div class="relative">
          <label class="block mb-3 font-semibold text-gray-700 text-sm tracking-wide">Location</label>
          <div id="dropdownButton" class="w-full p-4 border-2 border-gray-200 rounded-xl cursor-pointer bg-white hover:border-purple-300 transition-colors input-focus flex items-center justify-between">
            <span class="text-gray-500">Select your country</span>
            <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </div>

          <div id="dropdownMenu" class="absolute z-20 w-full bg-white border-2 border-gray-200 rounded-xl mt-2 hidden max-h-60 overflow-hidden shadow-xl">
            <input type="text" id="countrySearch" placeholder="Search countries..." class="w-full p-3 border-b border-gray-200 outline-none text-sm" />
            <div id="countryOptions" class="max-h-48 overflow-y-auto">
              <div class="p-3 hover:bg-purple-50 cursor-pointer transition-colors text-sm font-medium" data-value="Australia">ğŸ‡¦ğŸ‡º Australia</div>
              <div class="p-3 hover:bg-purple-50 cursor-pointer transition-colors text-sm font-medium" data-value="Brazil">ğŸ‡§ğŸ‡· Brazil</div>
              <div class="p-3 hover:bg-purple-50 cursor-pointer transition-colors text-sm font-medium" data-value="Canada">ğŸ‡¨ğŸ‡¦ Canada</div>
              <div class="p-3 hover:bg-purple-50 cursor-pointer transition-colors text-sm font-medium" data-value="China">ğŸ‡¨ğŸ‡³ China</div>
              <div class="p-3 hover:bg-purple-50 cursor-pointer transition-colors text-sm font-medium" data-value="Egypt">ğŸ‡ªğŸ‡¬ Egypt</div>
              <div class="p-3 hover:bg-purple-50 cursor-pointer transition-colors text-sm font-medium" data-value="Germany">ğŸ‡©ğŸ‡ª Germany</div>
              <div class="p-3 hover:bg-purple-50 cursor-pointer transition-colors text-sm font-medium" data-value="Ghana">ğŸ‡¬ğŸ‡­ Ghana</div>
              <div class="p-3 hover:bg-purple-50 cursor-pointer transition-colors text-sm font-medium" data-value="India">ğŸ‡®ğŸ‡³ India</div>
              <div class="p-3 hover:bg-purple-50 cursor-pointer transition-colors text-sm font-medium" data-value="Japan">ğŸ‡¯ğŸ‡µ Japan</div>
              <div class="p-3 hover:bg-purple-50 cursor-pointer transition-colors text-sm font-medium" data-value="Kenya">ğŸ‡°ğŸ‡ª Kenya</div>
              <div class="p-3 hover:bg-purple-50 cursor-pointer transition-colors text-sm font-medium" data-value="Mexico">ğŸ‡²ğŸ‡½ Mexico</div>
              <div class="p-3 hover:bg-purple-50 cursor-pointer transition-colors text-sm font-medium" data-value="Nigeria">ğŸ‡³ğŸ‡¬ Nigeria</div>
              <div class="p-3 hover:bg-purple-50 cursor-pointer transition-colors text-sm font-medium" data-value="SouthAfrica">ğŸ‡¿ğŸ‡¦ South Africa</div>
              <div class="p-3 hover:bg-purple-50 cursor-pointer transition-colors text-sm font-medium" data-value="UK">ğŸ‡¬ğŸ‡§ United Kingdom</div>
              <div class="p-3 hover:bg-purple-50 cursor-pointer transition-colors text-sm font-medium" data-value="USA">ğŸ‡ºğŸ‡¸ United States</div>
            </div>
          </div>
          <input type="hidden" id="country" />
        </div>

        <!-- Load -->
        <div>
          <label class="block mb-3 font-semibold text-gray-700 text-sm tracking-wide">Power Load (Watts)</label>
          <input id="load" type="number" class="w-full p-4 border-2 border-gray-200 rounded-xl input-focus" placeholder="500" />
        </div>

        <!-- Usage Hours -->
        <div>
          <label class="block mb-3 font-semibold text-gray-700 text-sm tracking-wide">Daily Usage (Hours)</label>
          <input id="usageHrs" type="number" class="w-full p-4 border-2 border-gray-200 rounded-xl input-focus" placeholder="5" />
        </div>

        <!-- Backup Hours -->
        <div>
          <label class="block mb-3 font-semibold text-gray-700 text-sm tracking-wide">Backup Duration (Hours)</label>
          <input id="backupHrs" type="number" class="w-full p-4 border-2 border-gray-200 rounded-xl input-focus" placeholder="2" />
        </div>

      </div>

      <!-- Right Column -->
      <div class="space-y-5">

        <!-- System Voltage -->
        <div>
          <label class="block mb-3 font-semibold text-gray-700 text-sm tracking-wide">System Voltage (V)</label>
          <input id="systemV" type="number" class="w-full p-4 border-2 border-gray-200 rounded-xl input-focus" placeholder="24" />
        </div>

        <!-- Solar Panel Wattage -->
        <div>
          <label class="block mb-3 font-semibold text-gray-700 text-sm tracking-wide">Panel Wattage (Wp)</label>
          <input id="panelW" type="number" class="w-full p-4 border-2 border-gray-200 rounded-xl input-focus" placeholder="300" />
        </div>

        <!-- Battery Voltage -->
        <div>
          <label class="block mb-3 font-semibold text-gray-700 text-sm tracking-wide">Battery Voltage (V)</label>
          <input id="batteryV" type="number" class="w-full p-4 border-2 border-gray-200 rounded-xl input-focus" placeholder="12" />
        </div>

        <!-- Battery Capacity -->
        <div>
          <label class="block mb-3 font-semibold text-gray-700 text-sm tracking-wide">Battery Capacity (Ah)</label>
          <input id="batteryAh" type="number" class="w-full p-4 border-2 border-gray-200 rounded-xl input-focus" placeholder="200" />
        </div>

      </div>
    </div>

    <!-- Battery Type (Full Width) -->
    <div class="mt-4 sm:mt-6">
      <label class="block mb-2 sm:mb-3 font-semibold text-gray-700 text-sm tracking-wide">Battery Technology</label>
      <select id="batteryType" class="w-full p-3 sm:p-4 border-2 border-gray-200 rounded-xl input-focus bg-white text-sm sm:text-base">
        <option value="tubular">ğŸ”‹ Tubular Lead-Acid</option>
        <option value="lithium">âš¡ Lithium Ion</option>
      </select>
    </div>

    <!-- Calculate button -->
    <button id="calculateBtn" class="w-full btn-gradient text-white py-3 sm:py-4 px-4 sm:px-6 rounded-xl font-semibold text-base sm:text-lg mt-6 sm:mt-8 flex items-center justify-center space-x-2 sm:space-x-3 shadow-lg">
      <span id="btnText">Calculate System</span>
      <svg id="btnSpinner" class="hidden animate-spin h-5 w-5 sm:h-6 sm:w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
      </svg>
    </button>

    <!-- Results -->
    <div id="results" class="hidden mt-6 sm:mt-8 p-4 sm:p-6 results-card rounded-2xl transition-all duration-500 opacity-0 transform translate-y-4"></div>

    <!-- Contact Section (single, cleaned copy) -->
    <div class="mt-8 sm:mt-10 text-center border-t border-gray-200 pt-6 sm:pt-8">
      <h2 class="text-lg sm:text-xl font-bold text-gray-800 mb-3 sm:mb-4">Get Expert Consultation</h2>
      <p class="text-gray-600 mb-4 sm:mb-6 text-xs sm:text-sm">Need help with your solar project? Connect with me for personalized guidance!</p>
      <div class="flex flex-col sm:flex-row justify-center space-y-3 sm:space-y-0 sm:space-x-4">
        <a href="https://wa.me/2348143369102" target="_blank" class="social-btn bg-green-500 text-white px-4 sm:px-6 py-3 rounded-xl font-semibold shadow-lg flex items-center justify-center space-x-2 text-sm sm:text-base">
          <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="currentColor" viewBox="0 0 24 24">
            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/>
          </svg>
          <span>WhatsApp</span>
        </a>
        <a href="https://www.instagram.com/tifeosame" target="_blank" class="social-btn bg-pink-500 text-white px-4 sm:px-6 py-3 rounded-xl font-semibold shadow-lg flex items-center justify-center space-x-2 text-sm sm:text-base">
          <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 6.62 5.367 11.987 11.988 11.987s11.987-5.367 11.987-11.987C24.014 5.367 18.647.001 12.017.001zM8.449 16.988c-1.297 0-2.448-.611-3.197-1.559-.748-.948-.748-2.122 0-3.07.749-.948 1.9-1.559 3.197-1.559s2.448.611 3.197 1.559c.748.948.748 2.122 0 3.07-.749.948-1.9 1.559-3.197 1.559zm7.718 0c-1.297 0-2.448-.611-3.197-1.559-.748-.948-.748-2.122 0-3.07.749-.948 1.9-1.559 3.197-1.559s2.448.611 3.197 1.559c.748.948.748 2.122 0 3.07-.749.948-1.9 1.559-3.197 1.559z"/>
          </svg>
          <span>Instagram</span>
        </a>
        <a href="mailto:tonyifeosame@gmail.com" class="social-btn bg-blue-500 text-white px-4 sm:px-6 py-3 rounded-xl font-semibold shadow-lg flex items-center justify-center space-x-2 text-sm sm:text-base">
          <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="currentColor" viewBox="0 0 24 24">
            <path d="M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-.904.732-1.636 1.636-1.636h.09c.299 0 .581.117.792.326L12 13.517l9.482-9.37c.21-.209.493-.326.792-.326h.09c.904 0 1.636.732 1.636 1.636z"/>
          </svg>
          <span>Email</span>
        </a>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Elements
      const dropdownBtn = document.getElementById("dropdownButton");
      const dropdownMenu = document.getElementById("dropdownMenu");
      const countrySearch = document.getElementById("countrySearch");
      const countryOptions = Array.from(document.querySelectorAll("#countryOptions > div"));
      const hiddenCountry = document.getElementById("country");

      const calculateBtn = document.getElementById("calculateBtn");
      const btnText = document.getElementById("btnText");
      const btnSpinner = document.getElementById("btnSpinner");
      const resultsDiv = document.getElementById("results");

      // Inputs that reset the button on change
      const watchedInputs = Array.from(document.querySelectorAll('input:not([type="hidden"]), select'));

      // Sun hours by country (keys must match data-value)
      const sunHoursData = {
        Australia: 7, Brazil: 5.5, Canada: 4.5, China: 5, Egypt: 9,
        Germany: 3.5, Ghana: 7.5, India: 7.5, Japan: 4.5, Kenya: 8,
        Mexico: 6, Nigeria: 6, SouthAfrica: 7, UK: 4.5, USA: 6.5
      };

      // Dropdown behavior
      dropdownBtn.addEventListener("click", (e) => {
        dropdownMenu.classList.toggle("hidden");
        if (!dropdownMenu.classList.contains("hidden")) {
          countrySearch.focus();
          countrySearch.value = "";
          filterOptions("");
        }
      });

      countrySearch.addEventListener("input", () => {
        filterOptions(countrySearch.value.toLowerCase());
      });

      function filterOptions(search) {
        countryOptions.forEach(opt => {
          const txt = opt.innerText.toLowerCase();
          opt.style.display = txt.includes(search) ? "" : "none";
        });
      }

      countryOptions.forEach(opt => {
        opt.addEventListener("click", () => {
          const countryText = opt.innerText;
          dropdownBtn.innerHTML = `<span>${countryText}</span><svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>`;
          hiddenCountry.value = opt.getAttribute("data-value");
          dropdownMenu.classList.add("hidden");
          resetButton();
        });
      });

      // Close dropdown if clicked outside
      document.addEventListener("click", (e) => {
        if (!e.target.closest("#dropdownMenu") && !e.target.closest("#dropdownButton")) {
          dropdownMenu.classList.add("hidden");
        }
      });

      // Reset button when any input changes
      watchedInputs.forEach(inp => {
        inp.addEventListener("input", resetButton);
        inp.addEventListener("change", resetButton);
      });

      function resetButton() {
        btnText.textContent = "Calculate System";
        btnSpinner.classList.add("hidden");
        calculateBtn.disabled = false;
        calculateBtn.className = "w-full btn-gradient text-white py-4 px-6 rounded-xl font-semibold text-lg mt-8 flex items-center justify-center space-x-3 shadow-lg";
      }

      // Main calculation
      calculateBtn.addEventListener("click", async () => {
        // Show spinner & disable
        btnText.textContent = "Calculating...";
        btnSpinner.classList.remove("hidden");
        calculateBtn.disabled = true;

        // tiny delay so spinner renders (and looks smooth)
        await new Promise(r => setTimeout(r, 120));

        // read values
        const load = parseFloat(document.getElementById("load").value);
        const usageHrs = parseFloat(document.getElementById("usageHrs").value);
        const backupHrs = parseFloat(document.getElementById("backupHrs").value);
        const systemV = parseFloat(document.getElementById("systemV").value);
        const panelW = parseFloat(document.getElementById("panelW").value);
        const batteryV = parseFloat(document.getElementById("batteryV").value);
        const batteryAh = parseFloat(document.getElementById("batteryAh").value);
        const batteryType = document.getElementById("batteryType").value;
        const country = hiddenCountry.value;

        // validate
        if (
          isNaN(load) || isNaN(usageHrs) || isNaN(backupHrs) ||
          isNaN(systemV) || isNaN(panelW) || isNaN(batteryV) || isNaN(batteryAh)
        ) {
          alert("âš ï¸ Please enter all values.");
          resetButton();
          return;
        }

        // choose battery profile
        let dod, efficiency;
        if (batteryType === "tubular") { dod = 0.5; efficiency = 0.85; }
        else { dod = 0.8; efficiency = 0.95; }

        // sun hours lookup
        const sunHours = sunHoursData[country] || 6;

        // core math
        const diversityFactor = 1.6;
        const adjustedLoad = load / diversityFactor;
        const dailyEnergy = adjustedLoad * usageHrs; // Wh/day
        const totalEnergy = adjustedLoad * backupHrs; // Wh needed to supply backupHrs
        const seriesBatteries = Math.max(1, Math.ceil(systemV / batteryV));
        const packWhPerString = batteryAh * batteryV * seriesBatteries;
        const usableWhPerString = packWhPerString * dod * efficiency;
        const parallelGroups = Math.max(1, Math.ceil(totalEnergy / usableWhPerString));
        const totalBatteries = seriesBatteries * parallelGroups;
        // âœ… FIXED: use 'load' (lowercase) â€” original logic retained
       // Round inverter size up to the nearest 500
function roundToNearest500(num) {
  return Math.ceil(num / 500) * 500;
}

       const inverterSize = roundToNearest500(load * 1.5);

        const totalSolarWatt = (dailyEnergy / sunHours) * 1.1; // +10% margin for losses
        const numPanels = Math.max(0, Math.ceil(totalSolarWatt / panelW)+1);

        // Get country display name
        const selectedCountryOption = countryOptions.find(opt => opt.getAttribute("data-value") === country);
        const countryDisplay = selectedCountryOption ? selectedCountryOption.innerText : (country || "Not selected");

        // build results HTML (modern styling)
        const resultsHTML = `
          <div class="flex items-center mb-4">
            <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mr-3">
              <svg class="w-6 h-6 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
              </svg>
            </div>
            <h3 class="text-xl font-bold text-gray-800">System Recommendations</h3>
          </div>
          
          <div class="grid md:grid-cols-2 gap-4 mb-6">
            <div class="bg-white bg-opacity-50 p-4 rounded-lg">
              <p class="text-sm font-medium text-gray-600 mb-1">Location & Battery Type</p>
              <p class="font-semibold text-gray-800">${countryDisplay}</p>
              <p class="text-sm text-gray-600">Sun hours: ${sunHours}/day â€¢ ${batteryType === "tubular" ? "Tubular Lead-Acid" : "Lithium Ion"}</p>
            </div>
            <div class="bg-white bg-opacity-50 p-4 rounded-lg">
              <p class="text-sm font-medium text-gray-600 mb-1">Load Analysis</p>
              <p class="font-semibold text-gray-800">${adjustedLoad.toFixed(1)} W (Adjusted)</p>
              <p class="text-sm text-gray-600">Daily: ${(dailyEnergy/1000).toFixed(2)} kWh â€¢ Backup: ${(totalEnergy/1000).toFixed(2)} kWh</p>
            </div>
          </div>

          <div class="space-y-4">
            <div class="flex justify-between items-center py-3 border-b border-gray-200">
              <span class="font-medium text-gray-700">ğŸ”‹ Battery Configuration</span>
              <span class="font-bold text-gray-900">${totalBatteries} batteries (${seriesBatteries}S Ã— ${parallelGroups}P)</span>
            </div>
            <div class="flex justify-between items-center py-3 border-b border-gray-200">
              <span class="font-medium text-gray-700">âš¡ Recommended Inverter</span>
              <span class="font-bold text-gray-900">${inverterSize} Watts</span>
            </div>
            <div class="flex justify-between items-center py-3">
              <span class="font-medium text-gray-700">â˜€ï¸ Solar Panel Array</span>
              <span class="font-bold text-gray-900">${numPanels} Ã— ${panelW}Wp panels</span>
            </div>
          </div>

          <div class="mt-6 p-4 bg-blue-50 rounded-lg border-l-4 border-blue-400">
            <p class="text-sm text-blue-700"><strong>Total Solar Capacity:</strong> ${(numPanels * panelW / 1000).toFixed(2)} kW</p>
            <p class="text-sm text-blue-700 mt-1"><strong>Usable Battery Storage:</strong> ${usableWhPerString.toFixed(0)} Wh per string</p>
          </div>
        `;

        // show results (smooth animation)
        resultsDiv.innerHTML = resultsHTML;
        resultsDiv.classList.remove("hidden");
        // trigger animation
        requestAnimationFrame(() => {
          resultsDiv.classList.remove("opacity-0", "translate-y-4");
          resultsDiv.classList.add("opacity-100", "translate-y-0");
        });

        // finish: update button to success state
        btnText.textContent = "âœ… Calculation Complete";
        btnSpinner.classList.add("hidden");
        calculateBtn.disabled = false;
        calculateBtn.className = "w-full btn-success text-white py-3 sm:py-4 px-4 sm:px-6 rounded-xl font-semibold text-base sm:text-lg mt-6 sm:mt-8 flex items-center justify-center space-x-2 sm:space-x-3 shadow-lg";
      });
    });
  </script>
</body>
</html>







